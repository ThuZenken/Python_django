from django.http import HttpResponse, HttpResponseRedirect
from django.shortcuts import get_object_or_404, render
from django.urls import reverse

from .models import Choice, Question
from django.contrib.auth.models import User
import csv

import pandas as pd
import sys
import os
import re
import fileinput

try:
    from StringIO import StringIO
except ImportError:
    from io import StringIO

# Create your views here.


def index(request):
    latest_question_list = Question.objects.order_by('-pub_date')[:5]
    context = {'latest_question_list': latest_question_list}
    return render(request, 'polls/index.html', context)


def detail(request, question_id):
    try:
        question = Question.objects.get(pk=question_id)
    except Question.DoesNotExist:
        raise Http404("Question does not exist")
    return render(request, 'polls/detail.html', {'question': question})


def results(question, question_id):
    def results(request, question_id):
        question = get_object_or_404(Question, pk=question_id)
    return render(request, 'polls/results.html', {'question': question})


def vote(request, question_id):
    question = get_object_or_404(Question, pk=question_id)
    try:
        selected_choice = question.choice_set.get(pk=request.POST['choice'])
    except (KeyError, Choice.DoesNotExist):
        # Redisplay the question voting form.
        return render(request, 'polls/detail.html', {
            'question': question,
            'error_message': "You didn't select a choice.",
        })
    else:
        selected_choice.votes += 1
        selected_choice.save()
        # Always return an HttpResponseRedirect after successfully dealing
        # with POST data. This prevents data from being posted twice if a
        # user hits the Back button.
        return render(request, 'polls/results.html', {'question': question})


def export(request):
    filepath = './001Before.txt'
    # f = open("./001Before.txt", "r", encoding="utf-8")
    filepath_new = './001After.txt'
    new_file = open(filepath_new, 'w', encoding="utf-8")
    # content = f.read()
    # content = re.sub(
    #     r"^(â˜†mergâ˜†âˆ‹)([^ã€’]*)ã€’(.*)âˆˆ([^ã€’]*)ã€’(.*)", "\\1\\3ã€’âˆˆğŸŒŠ\\5", content)
    with open(filepath, encoding="utf8") as fp:
        line = fp.readline()
        while line:
            if "â˜†mergâ˜†" in line:
                result = re.sub(
                    r"^(â˜†mergâ˜†âˆ‹)([^ã€’]*)ã€’(.*)âˆˆ([^ã€’]*)ã€’(.*)", "\\1\\3ã€’âˆˆğŸŒŠ\\5", line)
                result1 = re.sub(r"\n", "ã€’\n", result)

                result3 = re.sub(
                    r"^(â˜†mergâ˜†âˆ‹)([^ã€’]*)ã€’([^ğŸŒŠ]*)ğŸŒŠ(ã€’*[^ã€’]*)ã€’", "\\1\\3â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ1:\\2]â—=>â—\\4ğŸŒŠ", result1)
                result4 = re.sub(r"(â˜†mergâ˜†âˆ‹)([^ã€’]*)ã€’([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’",
                                 "\\1\\3â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ2:\\2]â—=>â—\\4ğŸŒŠ", result3)
                result5 = re.sub(r"(â˜†mergâ˜†âˆ‹)([^ã€’]*)ã€’([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’",
                                 "\\1\\3â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ3:\\2]â—=>â—\\4ğŸŒŠ", result4)
                result6 = re.sub(r"(â˜†mergâ˜†âˆ‹)([^ã€’]*)ã€’([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’",
                                 "\\1\\3â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ4:\\2]â—=>â—\\4ğŸŒŠ", result5)
                result7 = re.sub(r"(â˜†mergâ˜†âˆ‹)([^ã€’]*)ã€’([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’",
                                 "\\1\\3â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ5:\\2]â—=>â—\\4ğŸŒŠ", result6)
                result8 = re.sub(r"(â˜†mergâ˜†âˆ‹)([^ã€’]*)ã€’([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’",
                                 "\\1\\3â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ6:\\2]â—=>â—\\4ğŸŒŠ", result7)
                result9 = re.sub(r"(â˜†mergâ˜†âˆ‹)([^ã€’]*)ã€’([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’",
                                 "\\1\\3â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ7:\\2]â—=>â—\\4ğŸŒŠ", result8)
                result10 = re.sub(
                    r"(â˜†mergâ˜†âˆ‹)([^ã€’]*)ã€’([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’", "\\1\\3â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ8:\\2]â—=>â—\\4ğŸŒŠ", result9)
                result11 = re.sub(r"(â˜†mergâ˜†âˆ‹)([^ã€’]*)ã€’([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’",
                                  "\\1\\3â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ9:\\2]â—=>â—\\4ğŸŒŠ", result10)
                result12 = re.sub(r"(â˜†mergâ˜†âˆ‹)([^ã€’]*)ã€’([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’",
                                  "\\1\\3â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ10:\\2]â—=>â—\\4ğŸŒŠ", result11)
                result13 = re.sub(r"(â˜†mergâ˜†âˆ‹)([^ã€’]*)ã€’([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’",
                                  "\\1\\3â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ11:\\2]â—=>â—\\4ğŸŒŠ", result12)
                result14 = re.sub(r"(â˜†mergâ˜†âˆ‹)([^ã€’]*)ã€’([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’",
                                  "\\1\\3â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ12:\\2]â—=>â—\\4ğŸŒŠ", result13)
                result15 = re.sub(r"(â˜†mergâ˜†âˆ‹)([^ã€’]*)ã€’([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’",
                                  "\\1\\3â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ13:\\2]â—=>â—\\4ğŸŒŠ", result14)
                line = re.sub(
                    r"(â˜†mergâ˜†âˆ‹)([^ğŸŒŠ]*)ğŸŒŠ([^\n]*)", "\\1\\2ã€’", result15)
            if "â˜†noneâ˜†" in line:
                line = re.sub(
                    r"\n", "ã€’ã€’\n", line)
            if "â˜†repmâ˜†" in line:
                result = re.sub(
                    r"^(â˜†repmâ˜†âˆ‹)([^ã€’]*)ã€’(.*)âˆˆ([^ã€’]*)ã€’(.*)", "\\1\\3ã€’âˆˆğŸŒŠ\\5", line)
                result1 = re.sub(r"\n", "ã€’\n", result)
                result2 = re.sub(
                    r"^(â˜†repmâ˜†âˆ‹)([^ã€’]+)ã€’([^ğŸŒŠ]*)ğŸŒŠ(ã€’*[^ã€’]+)ã€’", "\\1\\3â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ1:\\2]â—=>â—\\4ğŸŒŠ\\4ã€’", result1)
                result3 = re.sub(
                    r"(â˜†repmâ˜†âˆ‹)([^ã€’]+)ã€’([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]+)ã€’", "\\1\\3â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ2:\\2]â—=>â—\\4ğŸŒŠ\\4ã€’", result2)
                result4 = re.sub(
                    r"(â˜†repmâ˜†âˆ‹)([^ã€’]*)ã€’([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’", "\\1\\3â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ3:\\2]â—=>â—\\4ğŸŒŠ\\4ã€’", result3)
                result5 = re.sub(
                    r"(â˜†repmâ˜†âˆ‹)([^ã€’]*)ã€’([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’", "\\1\\3â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ4:\\2]â—=>â—\\4ğŸŒŠ\\4ã€’", result4)
                result6 = re.sub(
                    r"(â˜†repmâ˜†âˆ‹)([^ã€’]*)ã€’([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’", "\\1\\3â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ5:\\2]â—=>â—\\4ğŸŒŠ\\4ã€’", result5)
                result7 = re.sub(
                    r"(â˜†repmâ˜†âˆ‹)([^ã€’]*)ã€’([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’", "\\1\\3â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ6:\\2]â—=>â—\\4ğŸŒŠ\\4ã€’", result6)
                result8 = re.sub(
                    r"(â˜†repmâ˜†âˆ‹)([^ã€’]*)ã€’([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’", "\\1\\3â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ7:\\2]â—=>â—\\4ğŸŒŠ\\4ã€’", result7)
                result9 = re.sub(
                    r"(â˜†repmâ˜†âˆ‹)([^ã€’]*)ã€’([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’", "\\1\\3â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ8:\\2]â—=>â—\\4ğŸŒŠ\\4ã€’", result8)
                result10 = re.sub(
                    r"(â˜†repmâ˜†âˆ‹)([^ã€’]*)ã€’([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’", "\\1\\3â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ9:\\2]â—=>â—\\4ğŸŒŠ\\4ã€’", result9)
                result11 = re.sub(
                    r"(â˜†repmâ˜†âˆ‹)([^ã€’]*)ã€’([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’", "\\1\\3â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ10:\\2]â—=>â—\\4ğŸŒŠ\\4ã€’", result10)
                result12 = re.sub(
                    r"(â˜†repmâ˜†âˆ‹)([^ã€’]*)ã€’([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’", "\\1\\3â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ11:\\2]â—=>â—\\4ğŸŒŠ\\4ã€’", result11)
                result13 = re.sub(
                    r"(â˜†repmâ˜†âˆ‹)([^ã€’]*)ã€’([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’", "\\1\\3â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ12:\\2]â—=>â—\\4ğŸŒŠ\\4ã€’", result12)
                result14 = re.sub(
                    r"(â˜†repmâ˜†âˆ‹)([^ã€’]*)ã€’([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’", "\\1\\3â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ13:\\2]â—=>â—\\4ğŸŒŠ\\4ã€’", result13)
                result15 = re.sub(
                    r"(â˜†repmâ˜†âˆ‹)([^ã€’]*)ã€’([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’", "\\1\\3â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ14:\\2]â—=>â—\\4ğŸŒŠ\\4ã€’", result14)
                result16 = re.sub(
                    r"(â˜†repmâ˜†âˆ‹)([^ã€’]*)ã€’([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’", "\\1\\3â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ15:\\2]â—=>â—\\4ğŸŒŠ\\4ã€’", result15)
                result17 = re.sub(
                    r"(â˜†repmâ˜†âˆ‹)([^ã€’]*)ã€’([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’", "\\1\\3â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ16:\\2]â—=>â—\\4ğŸŒŠ\\4ã€’", result16)
                result18 = re.sub(
                    r"(â˜†repmâ˜†âˆ‹)([^ã€’]*)ã€’([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’", "\\1\\3â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ17:\\2]â—=>â—\\4ğŸŒŠ\\4ã€’", result17)
                result19 = re.sub(
                    r"(â˜†repmâ˜†âˆ‹)([^ã€’]*)ã€’([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’", "\\1\\3â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ18:\\2]â—=>â—\\4ğŸŒŠ\\4ã€’", result18)
                result20 = re.sub(
                    r"(â˜†repmâ˜†âˆ‹)([^ã€’]*)ã€’([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’", "\\1\\3â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ19:\\2]â—=>â—\\4ğŸŒŠ\\4ã€’", result19)
                result21 = re.sub(
                    r"(â˜†repmâ˜†âˆ‹)([^ã€’]*)ã€’([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’", "\\1\\3â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ20:\\2]â—=>â—\\4ğŸŒŠ\\4ã€’", result20)
                result22 = re.sub(
                    r"(â˜†repmâ˜†âˆ‹)([^ã€’]*)ã€’([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’", "\\1\\3â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ21:\\2]â—=>â—\\4ğŸŒŠ\\4ã€’", result21)
                # line = re.sub(r"ğŸŒŠ\n", "ã€’ğŸŒŠ\n", result22)
                line = re.sub(
                    r"(â˜†repmâ˜†âˆ‹)([^ğŸŒŠ]*)ğŸŒŠ([^\n]*)", "\\1\\2", result22)
                # line = re.sub(r"\n", "ã€’ğŸŒŠ\n", result23)

            # if "â˜†noneâ˜†" in line:
            #     line = re.sub(r"\n", "ã€’ã€’ã€’ğŸŒŠ\n", line)

            if "â˜†inliâ˜†" in line:
                result = re.sub(
                    r"(â˜†inliâ˜†âˆ‹)([^ã€’]*)ã€’", "\\1ğŸŒŠ", line)
                result1_0 = re.sub(r"\n", "ã€’\n", result)
                result1 = re.sub(
                    r"(â˜†inliâ˜†âˆ‹)ğŸŒŠ([^ã€’]*)ã€’([^ã€’]*)ã€’", "\\1â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ1:\\2]â—=>â—\\3ğŸŒŠ", result1_0)
                result2 = re.sub(
                    r"([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’([^ã€’]*)ã€’", "\\1â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ2:\\2]â—=>â—\\3ğŸŒŠ", result1)
                result3 = re.sub(
                    r"([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’([^ã€’]*)ã€’", "\\1â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ3:\\2]â—=>â—\\3ğŸŒŠ", result2)
                result4 = re.sub(
                    r"([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’([^ã€’]*)ã€’", "\\1â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ4:\\2]â—=>â—\\3ğŸŒŠ", result3)
                result5 = re.sub(
                    r"([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’([^ã€’]*)ã€’", "\\1â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ5:\\2]â—=>â—\\3ğŸŒŠ", result4)
                result6 = re.sub(
                    r"([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’([^ã€’]*)ã€’", "\\1â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ6:\\2]â—=>â—\\3ğŸŒŠ", result5)
                result7 = re.sub(
                    r"([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’([^ã€’]*)ã€’", "\\1â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ7:\\2]â—=>â—\\3ğŸŒŠ", result6)
                result8 = re.sub(
                    r"([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’([^ã€’]*)ã€’", "\\1â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ8:\\2]â—=>â—\\3ğŸŒŠ", result7)
                result9 = re.sub(
                    r"([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’([^ã€’]*)ã€’", "\\1â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ9:\\2]â—=>â—\\3ğŸŒŠ", result8)
                result10 = re.sub(
                    r"([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’([^ã€’]*)ã€’", "\\1â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ10:\\2]â—=>â—\\3ğŸŒŠ", result9)
                result11 = re.sub(
                    r"([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’([^ã€’]*)ã€’", "\\1â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ11:\\2]â—=>â—\\3ğŸŒŠ", result10)
                result12 = re.sub(
                    r"([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’([^ã€’]*)ã€’", "\\1â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ12:\\2]â—=>â—\\3ğŸŒŠ", result11)
                result13 = re.sub(
                    r"([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’([^ã€’]*)ã€’", "\\1â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ13:\\2]â—=>â—\\3ğŸŒŠ", result12)
                result14 = re.sub(
                    r"([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’([^ã€’]*)ã€’", "\\1â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ14:\\2]â—=>â—\\3ğŸŒŠ", result13)
                result15 = re.sub(
                    r"([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’([^ã€’]*)ã€’", "\\1â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ15:\\2]â—=>â—\\3ğŸŒŠ", result14)
                result16 = re.sub(
                    r"([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’([^ã€’]*)ã€’", "\\1â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ16:\\2]â—=>â—\\3ğŸŒŠ", result15)
                result17 = re.sub(
                    r"([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’([^ã€’]*)ã€’", "\\1â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ17:\\2]â—=>â—\\3ğŸŒŠ", result16)
                result18 = re.sub(
                    r"([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’([^ã€’]*)ã€’", "\\1â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ18:\\2]â—=>â—\\3ğŸŒŠ", result17)
                result19 = re.sub(
                    r"([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’([^ã€’]*)ã€’", "\\1â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ19:\\2]â—=>â—\\3ğŸŒŠ", result18)
                result20 = re.sub(
                    r"([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’([^ã€’]*)ã€’", "\\1â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ20:\\2]â—=>â—\\3ğŸŒŠ", result19)
                result21 = re.sub(
                    r"([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’([^ã€’]*)ã€’", "\\1â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ21:\\2]â—=>â—\\3ğŸŒŠ", result20)
                result22 = re.sub(
                    r"([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’([^ã€’]*)ã€’", "\\1â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ22:\\2]â—=>â—\\3ğŸŒŠ", result21)
                result23 = re.sub(
                    r"([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’([^ã€’]*)ã€’", "\\1â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ23:\\2]â—=>â—\\3ğŸŒŠ", result22)
                result24 = re.sub(
                    r"([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’([^ã€’]*)ã€’", "\\1â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ24:\\2]â—=>â—\\3ğŸŒŠ", result23)
                result25 = re.sub(
                    r"([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’([^ã€’]*)ã€’", "\\1â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ25:\\2]â—=>â—\\3ğŸŒŠ", result24)
                result26 = re.sub(
                    r"([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’([^ã€’]*)ã€’", "\\1â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ26:\\2]â—=>â—\\3ğŸŒŠ", result25)
                result27 = re.sub(
                    r"([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’([^ã€’]*)ã€’", "\\1â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ27:\\2]â—=>â—\\3ğŸŒŠ", result26)
                result28 = re.sub(
                    r"([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’([^ã€’]*)ã€’", "\\1â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ28:\\2]â—=>â—\\3ğŸŒŠ", result27)
                line = re.sub(
                    r"([^ğŸŒŠ]*)ğŸŒŠ([^ã€’]*)ã€’([^ã€’]*)ã€’", "\\1â—â—‹â—‹â—[åŠ¹èƒ½åŠ¹æœ29:\\2]â—=>â—\\3ğŸŒŠ", result28)

            result_01 = re.sub(
                r"([ã€ã€])[â™«ğŸ¶â™©â™ªâ™¬ğŸ¼ã€Œã€ã€ã€â™‚âˆ‹âˆˆ]*([ã€Œã€])", "\\1ã€\\2", line)
            result_02 = re.sub(r"(å ´åˆ)([ã€ã€<])", "\\1:\\2", result_01)
            result_03 = re.sub(r"([ã-ã‚“])([ã€ã€<])", "\\1ã€‚\\2", result_02)
            result_04 = re.sub(r"[ã€Œã€ã€ã€]", "", result_03)
            result_05 = re.sub(r"</*[âŠ‡âŠ†âˆªâŠƒ]low\\d>", "", result_04)
            result_06 = re.sub(r"â†\\/*(chr|bold)â†’", "", result_05)
            result_07 = re.sub(r"â†‘â†‘2:[åŠ¹èƒ½åŠ¹æœ2:]ã€’", "", result_06)
            result_08 = re.sub(r"[â™«ğŸ¶â™©â™ªâ™¬ğŸ¼ã€Œã€ã€ã€â™‚âˆ‹âˆˆâ™ª]", "", result_07)
            final = re.sub(r"</*[âŠ‡âŠ†âˆªâŠƒ]low\\d>", "", result_08)
            new_file.write(final)
            line = fp.readline()
        new_file.close()
    return HttpResponse("Oke")
